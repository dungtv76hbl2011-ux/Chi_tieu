<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quản lý Chi tiêu Cá nhân</title>
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- CSS -->
  <?!= include('CSS'); ?>
  <!-- SheetJS for Excel Import/Export -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <!-- Chart.js for Data Visualization -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
      
</head>
<body>
  <!-- LOGIN SCREEN -->
  <div id="loginScreen" class="login-container">
    <div class="login-box">
      <div class="login-header">
        <i class="fas fa-wallet"></i>
        <h1>Quản lý Chi tiêu</h1>
        <p>Đăng nhập để tiếp tục</p>
      </div>
      
      <form id="loginForm" class="login-form">
        <div class="form-group">
          <label><i class="fas fa-user"></i> Tên đăng nhập</label>
          <input type="text" id="loginUsername" class="form-control" placeholder="Nhập tên đăng nhập" required>
        </div>
        
        <div class="form-group">
          <label><i class="fas fa-lock"></i> Mật khẩu</label>
          <div class="password-wrapper">
            <input type="password" id="loginPassword" class="form-control" placeholder="Nhập mật khẩu" required>
            <button type="button" class="toggle-password" onclick="togglePassword()">
              <i class="fas fa-eye"></i>
            </button>
          </div>
        </div>
        
        <button type="submit" class="btn-login">
          <i class="fas fa-sign-in-alt"></i> Đăng nhập
        </button>
        
        <div class="login-footer">
          <p>Tài khoản mặc định: admin / admin123</p>
        </div>
      </form>
    </div>
  </div>

  <!-- MAIN APP -->
  <div id="mainApp" class="app-container" style="display: none;">
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <i class="fas fa-wallet"></i>
        <h2>Finance App</h2>
        <button class="sidebar-toggle" onclick="toggleSidebar()">
          <i class="fas fa-bars"></i>
        </button>
      </div>
      
      <div class="user-info">
        <div class="user-avatar">
          <i class="fas fa-user-circle"></i>
        </div>
        <div class="user-details">
          <span class="user-name" id="userName">Admin</span>
          <span class="user-role" id="userRole">Quản trị viên</span>
        </div>
      </div>
      
      <nav class="sidebar-nav">
        <a href="#" class="nav-item active" data-page="dashboard">
          <i class="fas fa-home"></i>
          <span>Trang chủ</span>
        </a>
        <a href="#" class="nav-item" data-page="income">
          <i class="fas fa-money-bill-wave"></i>
          <span>Thu nhập</span>
        </a>
        <a href="#" class="nav-item" data-page="expense">
          <i class="fas fa-shopping-cart"></i>
          <span>Chi tiêu</span>
        </a>
        <a href="#" class="nav-item" data-page="budget">
          <i class="fas fa-chart-pie"></i>
          <span>Ngân sách</span>
        </a>
        <a href="#" class="nav-item" data-page="loan">
          <i class="fas fa-hand-holding-usd"></i>
          <span>Khoản vay</span>
        </a>
        <a href="#" class="nav-item" data-page="investment">
          <i class="fas fa-chart-line"></i>
          <span>Đầu tư</span>
        </a>
        <a href="#" class="nav-item" data-page="thirdparty">
          <i class="fas fa-user-friends"></i>
          <span>Thu chi hộ</span>
        </a>
        <a href="#" class="nav-item" data-page="accounts">
          <i class="fas fa-university"></i>
          <span>Tài khoản</span>
        </a>
        <a href="#" class="nav-item" data-page="reports">
          <i class="fas fa-file-alt"></i>
          <span>Báo cáo</span>
        </a>
        <a href="#" class="nav-item" data-page="settings">
          <i class="fas fa-cog"></i>
          <span>Cài đặt</span>
        </a>
      </nav>
      
      <div class="sidebar-footer">
        <button class="btn-logout" onclick="handleLogout()">
          <i class="fas fa-sign-out-alt"></i>
          <span>Đăng xuất</span>
        </button>
      </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <div class="topbar">
        <div class="topbar-left">
          <button class="mobile-menu-btn" onclick="toggleSidebar()">
            <i class="fas fa-bars"></i>
          </button>
          <h1 id="pageTitle">Trang chủ</h1>
        </div>
        <div class="topbar-right">
          <button class="btn-icon" title="Làm mới">
            <i class="fas fa-sync-alt"></i>
          </button>
          <button class="btn-icon" title="Thông báo">
            <i class="fas fa-bell"></i>
          </button>
        </div>
      </div>
      
      <div class="content-wrapper" id="contentWrapper">
        <!-- Content will be loaded here -->
      </div>
    </div>
  </div>

  <!-- Loading Spinner -->
  <div id="loadingSpinner" class="loading-spinner" style="display: none;">
    <div class="spinner"></div>
    <p>Đang tải...</p>
  </div>

  <!-- Toast Notification -->
  <div id="toast" class="toast"></div>

  <!-- Modal -->
  <div id="modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="modalTitle">Modal</h3>
        <button class="modal-close" onclick="closeModal()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body" id="modalBody">
        <!-- Modal content -->
      </div>
      <div class="modal-footer" id="modalFooter">
        <!-- Modal footer buttons -->
      </div>
    </div>
  </div>

  <!-- JavaScript -->
  <?!= include('JavaScript'); ?>
</body>
</html>